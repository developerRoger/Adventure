<!DOCTYPE html>
<html>
<head lang="en">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="../js/header.js"></script>
<script type="text/javascript" src="../js/footer.js"></script>

<title>文件上传</title>
<style type="text/css">
</style>
</head>
<body>
	<div id="upload" v-cloak>
		<h1>唯独于你，心心念念</h1>
		<input type="file" value="" id="file" @change='onUpload'>
		<div>{{url}}</div>
	</div>

	<script type="text/javascript">
var vm = new Vue({
	el:'#upload',
	data:{
		showList: true,
		url: null,
		menu: {}
	},
	methods: {
		//上传图片
		onUpload(e){
		      var formData = new FormData(); 
			    formData.append('image', e.target.files[0]);
		      $.ajax({
		        url: '/adventure/qiniu/uploadImg',//这里是后台接口需要换掉
		        type: 'POST',
		        dataType: 'json',
		        cache: false,
		        data: formData,
		        processData: false,
		        contentType: false,
		        success: (res) => {        
		        	this.url=res.url;
		        },	
		        error: function(err) {
		        alert("网络错误");
		        }
		      });
		}
	},
	created:function(){
	 var _this=this;
	 console.log("welcome go  in");
	}
});

</script>
</body>
</html>